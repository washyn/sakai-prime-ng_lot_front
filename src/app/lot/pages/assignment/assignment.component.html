<div
    class="mb-3 flex align-items-start flex-column lg:justify-content-between lg:flex-row"
>
    <div>
        <div class="font-medium text-3xl text-700">Comisiones</div>
    </div>
    <div class="mt-3 lg:mt-0">
        <button
            pButton
            pRipple
            (click)="createComisionModal()"
            label="Registrar comisión"
            icon="pi pi-plus"
            class="p-button-outlined mr-2"
        ></button>
    </div>
</div>

<div class="grid">
    <div class="col-6" *ngFor="let item of comisiones">
        <div class="surface-card p-3 shadow-1 border-round">
            <div class="grid">
                <div class="col-12">
                    <div class="font-small text-lg text-700">
                        {{ item.nombre }}
                    </div>
                    <ul>
                        <li *ngFor="let role of item.rols">
                            {{role.nombre}}
                        </li>
                    </ul>
                </div>

<!--                TODO: add page for, lot, res ... -->
                <hr>
<!--                TODO: mostrar la lista de roles y la lista de roles y las personas sorteadas-->
<!--                // add or remove rol-->

                <div class="col-12">
                    <div class="">
                        <button
                            pButton
                            pRipple
                            label=""
                            icon="pi pi-trash"
                            class="p-button-outlined mr-2"
                            (click)="removerComision(item.id)"
                        ></button>
                        <button
                            pButton
                            pRipple
                            icon="pi pi-pencil"
                            (click)="editComisionModal(item.id)"
                            label=""
                            class="p-button-outlined mr-2"
                        ></button>
<!--                        <button-->
<!--                            pButton-->
<!--                            pRipple-->
<!--                            (click)="agregarParticipantes(item.id)"-->
<!--                            label="Agregar participante"-->
<!--                            class="p-button-outlined mr-2"-->
<!--                        ></button>-->
                        <button
                            pButton
                            pRipple
                            (click)="agregarRol(item.id)"
                            label="Agregar rol"
                            class="p-button-outlined mr-2"
                        ></button>
                        <button
                            pButton
                            routerLink="/lot/process"
                            [queryParams]="{comisionId:item.id}"
                            pRipple
                            label="Realizar sorteo"
                            class="p-button-outlined mr-2"
                        ></button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!--<hr />-->

<!-- Improvement: add grid as responsive -->
<!--<div class="grid">-->
<!--    <div class="col-6" *ngFor="let item of comisiones">-->
<!--        <app-comision [comision]="item"></app-comision>-->
<!--    </div>-->
<!--</div>-->

<!-- TODO: add code  for add and remove comisions -->

<p-dialog
    [(visible)]="modalComision"
    [style]="{ width: '600px' }"
    header="Registrar nueva comisión"
    [modal]="true"
    [draggable]="false"
    [resizable]="false"
>
    <ng-template pTemplate="content">
        <form
            class="grid formgrid p-fluid"
            [formGroup]="formComision"
            (ngSubmit)="saveFormComision()"
        >
            <div class="field col-12">
                <label class="font-medium text-700">Nombre comisión *</label>
                <input
                    class="p-inputtext-sm"
                    pInputText
                    type="text"
                    formControlName="nombre"
                />
            </div>
        </form>
    </ng-template>

    <ng-template pTemplate="footer">
        <button
            pButton
            pRipple
            label="Cancelar"
            icon="pi pi-times"
            class="p-button-text"
            (click)="modalComision = false"
        ></button>
        <button
            pButton
            pRipple
            label="Guardar"
            icon="pi pi-check"
            class="p-button-text"
            (click)="saveFormComision()"
        ></button>
    </ng-template>
</p-dialog>


<p-dialog
    [(visible)]="modalRol"
    [style]="{ width: '600px' }"
    header="Agregar rol"
    [modal]="true"
    [draggable]="false"
    [resizable]="false"
>
    <ng-template pTemplate="content">
        <form
            class="grid formgrid p-fluid"
            [formGroup]="formRol"
            (ngSubmit)="saveFormRole()"
        >
            <div class="field col-12">
                <label class="font-medium text-700">Nombre de rol *</label>
                <input
                    class="p-inputtext-sm"
                    pInputText
                    type="text"
                    formControlName="nombre"
                />
            </div>
        </form>
    </ng-template>

    <ng-template pTemplate="footer">
        <button
            pButton
            pRipple
            label="Cancelar"
            icon="pi pi-times"
            class="p-button-text"
            (click)="modalRol = false"
        ></button>
        <button
            pButton
            pRipple
            label="Guardar"
            icon="pi pi-check"
            class="p-button-text"
            (click)="saveFormRole()"
        ></button>
    </ng-template>
</p-dialog>


<p-dialog
    [(visible)]="modalRol"
    [style]="{ width: '600px' }"
    header="Agregar rol"
    [modal]="true"
    [draggable]="false"
    [resizable]="false"
>
    <ng-template pTemplate="content">
        <form
            class="grid formgrid p-fluid"
            [formGroup]="formRol"
            (ngSubmit)="saveFormRole()"
        >
            <div class="field col-12">
                <label class="font-medium text-700">Nombre de rol *</label>
                <input
                    class="p-inputtext-sm"
                    pInputText
                    type="text"
                    formControlName="nombre"
                />
            </div>
        </form>
    </ng-template>

    <ng-template pTemplate="footer">
        <button
            pButton
            pRipple
            label="Cancelar"
            icon="pi pi-times"
            class="p-button-text"
            (click)="modalRol = false"
        ></button>
        <button
            pButton
            pRipple
            label="Guardar"
            icon="pi pi-check"
            class="p-button-text"
            (click)="saveFormRole()"
        ></button>
    </ng-template>
</p-dialog>

